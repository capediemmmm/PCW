import{e as $,b as O,g as ut,c as T,d as Oe,_ as wt,a as _t,k as Lt}from"./@babel-D91nw8a6.js";import{c as ze}from"./classnames-BK5ccKcQ.js";import{R as ot}from"./rc-resize-observer-TfKnNo0J.js";import{t as U,I as zt,u as Se,i as Je}from"./rc-util-CM-8WHnx.js";import{r as t}from"./react-CeYxiRmC.js";import{r as Qe}from"./react-dom-YNBHO1N0.js";var lt=t.forwardRef(function(e,s){var c=e.height,f=e.offsetY,v=e.offsetX,d=e.children,l=e.prefixCls,u=e.onInnerResize,b=e.innerProps,h=e.rtl,g=e.extra,n={},S={display:"flex",flexDirection:"column"};return f!==void 0&&(n={height:c,position:"relative",overflow:"hidden"},S=$($({},S),{},O(O(O(O(O({transform:"translateY(".concat(f,"px)")},h?"marginRight":"marginLeft",-v),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(ot,{onResize:function(R){var i=R.offsetHeight;i&&u&&u()}},t.createElement("div",ut({style:S,className:ze(O({},"".concat(l,"-holder-inner"),l)),ref:s},b),d,g)))});lt.displayName="Filler";function Dt(e){var s=e.children,c=e.setRef,f=t.useCallback(function(v){c(v)},[]);return t.cloneElement(s,{ref:f})}function Tt(e,s,c,f,v,d,l,u){var b=u.getKey;return e.slice(s,c+1).map(function(h,g){var n=s+g,S=l(h,n,{style:{width:f},offsetX:v}),o=b(h);return t.createElement(Dt,{key:o,setRef:function(i){return d(h,i)}},S)})}function It(e,s,c){var f=e.length,v=s.length,d,l;if(f===0&&v===0)return null;f<v?(d=e,l=s):(d=s,l=e);var u={__EMPTY_ITEM__:!0};function b(R){return R!==void 0?c(R):u}for(var h=null,g=Math.abs(f-v)!==1,n=0;n<l.length;n+=1){var S=b(d[n]),o=b(l[n]);if(S!==o){h=n,g=g||S!==b(l[n+1]);break}}return h===null?null:{index:h,multiple:g}}function Ct(e,s,c){var f=t.useState(e),v=T(f,2),d=v[0],l=v[1],u=t.useState(null),b=T(u,2),h=b[0],g=b[1];return t.useEffect(function(){var n=It(d||[],e||[],s);(n==null?void 0:n.index)!==void 0&&g(e[n.index]),l(e)},[e]),[h]}var et=(typeof navigator>"u"?"undefined":Oe(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const st=function(e,s,c,f){var v=t.useRef(!1),d=t.useRef(null);function l(){clearTimeout(d.current),v.current=!0,d.current=setTimeout(function(){v.current=!1},50)}var u=t.useRef({top:e,bottom:s,left:c,right:f});return u.current.top=e,u.current.bottom=s,u.current.left=c,u.current.right=f,function(b,h){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=b?h<0&&u.current.left||h>0&&u.current.right:h<0&&u.current.top||h>0&&u.current.bottom;return g&&n?(clearTimeout(d.current),v.current=!1):(!n||v.current)&&l(),!v.current&&n}};function Ht(e,s,c,f,v,d,l){var u=t.useRef(0),b=t.useRef(null),h=t.useRef(null),g=t.useRef(!1),n=st(s,c,f,v);function S(m,E){if(U.cancel(b.current),!n(!1,E)){var y=m;if(!y._virtualHandled)y._virtualHandled=!0;else return;u.current+=E,h.current=E,et||y.preventDefault(),b.current=U(function(){var X=g.current?10:1;l(u.current*X,!1),u.current=0})}}function o(m,E){l(E,!0),et||m.preventDefault()}var R=t.useRef(null),i=t.useRef(null);function M(m){if(e){U.cancel(i.current),i.current=U(function(){R.current=null},2);var E=m.deltaX,y=m.deltaY,X=m.shiftKey,P=E,x=y;(R.current==="sx"||!R.current&&X&&y&&!E)&&(P=y,x=0,R.current="sx");var Y=Math.abs(P),D=Math.abs(x);R.current===null&&(R.current=d&&Y>D?"x":"y"),R.current==="y"?S(m,x):o(m,P)}}function _(m){e&&(g.current=m.detail===h.current)}return[M,_]}function Pt(e,s,c,f){var v=t.useMemo(function(){return[new Map,[]]},[e,c.id,f]),d=T(v,2),l=d[0],u=d[1],b=function(g){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,S=l.get(g),o=l.get(n);if(S===void 0||o===void 0)for(var R=e.length,i=u.length;i<R;i+=1){var M,_=e[i],m=s(_);l.set(m,i);var E=(M=c.get(m))!==null&&M!==void 0?M:f;if(u[i]=(u[i-1]||0)+E,m===g&&(S=i),m===n&&(o=i),S!==void 0&&o!==void 0)break}return{top:u[S-1]||0,bottom:u[o]}};return b}var kt=function(){function e(){_t(this,e),O(this,"maps",void 0),O(this,"id",0),this.maps=Object.create(null)}return wt(e,[{key:"set",value:function(c,f){this.maps[c]=f,this.id+=1}},{key:"get",value:function(c){return this.maps[c]}}]),e}();function tt(e){var s=parseFloat(e);return isNaN(s)?0:s}function Nt(e,s,c){var f=t.useState(0),v=T(f,2),d=v[0],l=v[1],u=t.useRef(new Map),b=t.useRef(new kt),h=t.useRef();function g(){U.cancel(h.current)}function n(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;g();var R=function(){u.current.forEach(function(M,_){if(M&&M.offsetParent){var m=zt(M),E=m.offsetHeight,y=getComputedStyle(m),X=y.marginTop,P=y.marginBottom,x=tt(X),Y=tt(P),D=E+x+Y;b.current.get(_)!==D&&b.current.set(_,D)}}),l(function(M){return M+1})};o?R():h.current=U(R)}function S(o,R){var i=e(o);u.current.get(i),R?(u.current.set(i,R),n()):u.current.delete(i)}return t.useEffect(function(){return g},[]),[S,n,b.current,d]}var rt=14/15;function Ot(e,s,c){var f=t.useRef(!1),v=t.useRef(0),d=t.useRef(0),l=t.useRef(null),u=t.useRef(null),b,h=function(o){if(f.current){var R=Math.ceil(o.touches[0].pageX),i=Math.ceil(o.touches[0].pageY),M=v.current-R,_=d.current-i,m=Math.abs(M)>Math.abs(_);m?v.current=R:d.current=i;var E=c(m,m?M:_,!1,o);E&&o.preventDefault(),clearInterval(u.current),E&&(u.current=setInterval(function(){m?M*=rt:_*=rt;var y=Math.floor(m?M:_);(!c(m,y,!0)||Math.abs(y)<=.1)&&clearInterval(u.current)},16))}},g=function(){f.current=!1,b()},n=function(o){b(),o.touches.length===1&&!f.current&&(f.current=!0,v.current=Math.ceil(o.touches[0].pageX),d.current=Math.ceil(o.touches[0].pageY),l.current=o.target,l.current.addEventListener("touchmove",h,{passive:!1}),l.current.addEventListener("touchend",g,{passive:!0}))};b=function(){l.current&&(l.current.removeEventListener("touchmove",h),l.current.removeEventListener("touchend",g))},Se(function(){return e&&s.current.addEventListener("touchstart",n,{passive:!0}),function(){var S;(S=s.current)===null||S===void 0||S.removeEventListener("touchstart",n),b(),clearInterval(u.current)}},[e])}var $t=10;function Yt(e,s,c,f,v,d,l,u){var b=t.useRef(),h=t.useState(null),g=T(h,2),n=g[0],S=g[1];return Se(function(){if(n&&n.times<$t){if(!e.current){S(function(I){return $({},I)});return}d();var o=n.targetAlign,R=n.originAlign,i=n.index,M=n.offset,_=e.current.clientHeight,m=!1,E=o,y=null;if(_){for(var X=o||R,P=0,x=0,Y=0,D=Math.min(s.length-1,i),G=0;G<=D;G+=1){var A=v(s[G]);x=P;var J=c.get(A);Y=x+(J===void 0?f:J),P=Y}for(var Q=X==="top"?M:_-M,F=D;F>=0;F-=1){var te=v(s[F]),k=c.get(te);if(k===void 0){m=!0;break}if(Q-=k,Q<=0)break}switch(X){case"top":y=x-M;break;case"bottom":y=Y-_+M;break;default:{var q=e.current.scrollTop,V=q+_;x<q?E="top":Y>V&&(E="bottom")}}y!==null&&l(y),y!==n.lastTop&&(m=!0)}m&&S($($({},n),{},{times:n.times+1,targetAlign:E,lastTop:y}))}},[n,e.current]),function(o){if(o==null){u();return}if(U.cancel(b.current),typeof o=="number")l(o);else if(o&&Oe(o)==="object"){var R,i=o.align;"index"in o?R=o.index:R=s.findIndex(function(m){return v(m)===o.key});var M=o.offset,_=M===void 0?0:M;S({times:0,index:R,offset:_,originAlign:i})}}}function nt(e,s){var c="touches"in e?e.touches[0]:e;return c[s?"pageX":"pageY"]}var at=t.forwardRef(function(e,s){var c=e.prefixCls,f=e.rtl,v=e.scrollOffset,d=e.scrollRange,l=e.onStartMove,u=e.onStopMove,b=e.onScroll,h=e.horizontal,g=e.spinSize,n=e.containerSize,S=e.style,o=e.thumbStyle,R=t.useState(!1),i=T(R,2),M=i[0],_=i[1],m=t.useState(null),E=T(m,2),y=E[0],X=E[1],P=t.useState(null),x=T(P,2),Y=x[0],D=x[1],G=!f,A=t.useRef(),J=t.useRef(),Q=t.useState(!1),F=T(Q,2),te=F[0],k=F[1],q=t.useRef(),V=function(){clearTimeout(q.current),k(!0),q.current=setTimeout(function(){k(!1)},3e3)},I=d-n||0,oe=n-g||0,L=t.useMemo(function(){if(v===0||I===0)return 0;var N=v/I;return N*oe},[v,I,oe]),ee=function(w){w.stopPropagation(),w.preventDefault()},re=t.useRef({top:L,dragging:M,pageY:y,startTop:Y});re.current={top:L,dragging:M,pageY:y,startTop:Y};var ne=function(w){_(!0),X(nt(w,h)),D(re.current.top),l(),w.stopPropagation(),w.preventDefault()};t.useEffect(function(){var N=function(ae){ae.preventDefault()},w=A.current,B=J.current;return w.addEventListener("touchstart",N,{passive:!1}),B.addEventListener("touchstart",ne,{passive:!1}),function(){w.removeEventListener("touchstart",N),B.removeEventListener("touchstart",ne)}},[]);var ge=t.useRef();ge.current=I;var le=t.useRef();le.current=oe,t.useEffect(function(){if(M){var N,w=function(ae){var se=re.current,pe=se.dragging,Me=se.pageY,be=se.startTop;U.cancel(N);var ye=A.current.getBoundingClientRect(),ie=n/(h?ye.width:ye.height);if(pe){var ce=(nt(ae,h)-Me)*ie,fe=be;!G&&h?fe-=ce:fe+=ce;var xe=ge.current,Ee=le.current,De=Ee?fe/Ee:0,K=Math.ceil(De*xe);K=Math.max(K,0),K=Math.min(K,xe),N=U(function(){b(K,h)})}},B=function(){_(!1),u()};return window.addEventListener("mousemove",w,{passive:!0}),window.addEventListener("touchmove",w,{passive:!0}),window.addEventListener("mouseup",B,{passive:!0}),window.addEventListener("touchend",B,{passive:!0}),function(){window.removeEventListener("mousemove",w),window.removeEventListener("touchmove",w),window.removeEventListener("mouseup",B),window.removeEventListener("touchend",B),U.cancel(N)}}},[M]),t.useEffect(function(){return V(),function(){clearTimeout(q.current)}},[v]),t.useImperativeHandle(s,function(){return{delayHidden:V}});var C="".concat(c,"-scrollbar"),W={position:"absolute",visibility:te?null:"hidden"},j={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return h?(W.height=8,W.left=0,W.right=0,W.bottom=0,j.height="100%",j.width=g,G?j.left=L:j.right=L):(W.width=8,W.top=0,W.bottom=0,G?W.right=0:W.left=0,j.width="100%",j.height=g,j.top=L),t.createElement("div",{ref:A,className:ze(C,O(O(O({},"".concat(C,"-horizontal"),h),"".concat(C,"-vertical"),!h),"".concat(C,"-visible"),te)),style:$($({},W),S),onMouseDown:ee,onMouseMove:V},t.createElement("div",{ref:J,className:ze("".concat(C,"-thumb"),O({},"".concat(C,"-thumb-moving"),M)),style:$($({},j),o),onMouseDown:ne}))}),Ft=20;function it(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=e/s*e;return isNaN(c)&&(c=0),c=Math.max(c,Ft),Math.floor(c)}var Xt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Wt=[],Bt={overflowY:"auto",overflowAnchor:"none"};function Vt(e,s){var c=e.prefixCls,f=c===void 0?"rc-virtual-list":c,v=e.className,d=e.height,l=e.itemHeight,u=e.fullHeight,b=u===void 0?!0:u,h=e.style,g=e.data,n=e.children,S=e.itemKey,o=e.virtual,R=e.direction,i=e.scrollWidth,M=e.component,_=M===void 0?"div":M,m=e.onScroll,E=e.onVirtualScroll,y=e.onVisibleChange,X=e.innerProps,P=e.extraRender,x=e.styles,Y=Lt(e,Xt),D=t.useCallback(function(a){return typeof S=="function"?S(a):a==null?void 0:a[S]},[S]),G=Nt(D),A=T(G,4),J=A[0],Q=A[1],F=A[2],te=A[3],k=!!(o!==!1&&d&&l),q=t.useMemo(function(){return Object.values(F.maps).reduce(function(a,r){return a+r},0)},[F.id,F.maps]),V=k&&g&&(Math.max(l*g.length,q)>d||!!i),I=R==="rtl",oe=ze(f,O({},"".concat(f,"-rtl"),I),v),L=g||Wt,ee=t.useRef(),re=t.useRef(),ne=t.useRef(),ge=t.useState(0),le=T(ge,2),C=le[0],W=le[1],j=t.useState(0),N=T(j,2),w=N[0],B=N[1],Re=t.useState(!1),ae=T(Re,2),se=ae[0],pe=ae[1],Me=function(){pe(!0)},be=function(){pe(!1)},ye={getKey:D};function ie(a){W(function(r){var p;typeof a=="function"?p=a(r):p=a;var z=mt(p);return ee.current.scrollTop=z,z})}var ce=t.useRef({start:0,end:L.length}),fe=t.useRef(),xe=Ct(L,D),Ee=T(xe,1),De=Ee[0];fe.current=De;var K=t.useMemo(function(){if(!k)return{scrollHeight:void 0,start:0,end:L.length-1,offset:void 0};if(!V){var a;return{scrollHeight:((a=re.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:L.length-1,offset:void 0}}for(var r=0,p,z,H,Ze=L.length,me=0;me<Ze;me+=1){var xt=L[me],Et=D(xt),qe=F.get(Et),Ne=r+(qe===void 0?l:qe);Ne>=C&&p===void 0&&(p=me,z=r),Ne>C+d&&H===void 0&&(H=me),r=Ne}return p===void 0&&(p=0,z=0,H=Math.ceil(d/l)),H===void 0&&(H=L.length-1),H=Math.min(H+1,L.length-1),{scrollHeight:r,start:p,end:H,offset:z}},[V,k,C,L,te,d]),ue=K.scrollHeight,ve=K.start,de=K.end,$e=K.offset;ce.current.start=ve,ce.current.end=de;var ct=t.useState({width:0,height:d}),Ye=T(ct,2),Z=Ye[0],ft=Ye[1],vt=function(r){ft({width:r.offsetWidth,height:r.offsetHeight})},Fe=t.useRef(),Xe=t.useRef(),dt=t.useMemo(function(){return it(Z.width,i)},[Z.width,i]),ht=t.useMemo(function(){return it(Z.height,ue)},[Z.height,ue]),Te=ue-d,Ie=t.useRef(Te);Ie.current=Te;function mt(a){var r=a;return Number.isNaN(Ie.current)||(r=Math.min(r,Ie.current)),r=Math.max(r,0),r}var we=C<=0,_e=C>=Te,We=w<=0,Be=w>=i,St=st(we,_e,We,Be),Ce=function(){return{x:I?-w:w,y:C}},He=t.useRef(Ce()),Le=Je(function(a){if(E){var r=$($({},Ce()),a);(He.current.x!==r.x||He.current.y!==r.y)&&(E(r),He.current=r)}});function Ve(a,r){var p=a;r?(Qe.flushSync(function(){B(p)}),Le()):ie(p)}function gt(a){var r=a.currentTarget.scrollTop;r!==C&&ie(r),m==null||m(a),Le()}var Pe=function(r){var p=r,z=i?i-Z.width:0;return p=Math.max(p,0),p=Math.min(p,z),p},Rt=Je(function(a,r){r?(Qe.flushSync(function(){B(function(p){var z=p+(I?-a:a);return Pe(z)})}),Le()):ie(function(p){var z=p+a;return z})}),pt=Ht(k,we,_e,We,Be,!!i,Rt),Ae=T(pt,2),ke=Ae[0],je=Ae[1];Ot(k,ee,function(a,r,p,z){var H=z;return St(a,r,p)?!1:!H||!H._virtualHandled?(H&&(H._virtualHandled=!0),ke({preventDefault:function(){},deltaX:a?r:0,deltaY:a?0:r}),!0):!1}),Se(function(){function a(p){var z=we&&p.detail<0,H=_e&&p.detail>0;k&&!z&&!H&&p.preventDefault()}var r=ee.current;return r.addEventListener("wheel",ke,{passive:!1}),r.addEventListener("DOMMouseScroll",je,{passive:!0}),r.addEventListener("MozMousePixelScroll",a,{passive:!1}),function(){r.removeEventListener("wheel",ke),r.removeEventListener("DOMMouseScroll",je),r.removeEventListener("MozMousePixelScroll",a)}},[k,we,_e]),Se(function(){if(i){var a=Pe(w);B(a),Le({x:a})}},[Z.width,i]);var Ke=function(){var r,p;(r=Fe.current)===null||r===void 0||r.delayHidden(),(p=Xe.current)===null||p===void 0||p.delayHidden()},Ue=Yt(ee,L,F,l,D,function(){return Q(!0)},ie,Ke);t.useImperativeHandle(s,function(){return{nativeElement:ne.current,getScrollInfo:Ce,scrollTo:function(r){function p(z){return z&&Oe(z)==="object"&&("left"in z||"top"in z)}p(r)?(r.left!==void 0&&B(Pe(r.left)),Ue(r.top)):Ue(r)}}}),Se(function(){if(y){var a=L.slice(ve,de+1);y(a,L)}},[ve,de,L]);var Mt=Pt(L,D,F,l),bt=P==null?void 0:P({start:ve,end:de,virtual:V,offsetX:w,offsetY:$e,rtl:I,getSize:Mt}),yt=Tt(L,ve,de,i,w,J,n,ye),he=null;d&&(he=$(O({},b?"height":"maxHeight",d),Bt),k&&(he.overflowY="hidden",i&&(he.overflowX="hidden"),se&&(he.pointerEvents="none")));var Ge={};return I&&(Ge.dir="rtl"),t.createElement("div",ut({ref:ne,style:$($({},h),{},{position:"relative"}),className:oe},Ge,Y),t.createElement(ot,{onResize:vt},t.createElement(_,{className:"".concat(f,"-holder"),style:he,ref:ee,onScroll:gt,onMouseEnter:Ke},t.createElement(lt,{prefixCls:f,height:ue,offsetX:w,offsetY:$e,scrollWidth:i,onInnerResize:Q,ref:re,innerProps:X,rtl:I,extra:bt},yt))),V&&ue>d&&t.createElement(at,{ref:Fe,prefixCls:f,scrollOffset:C,scrollRange:ue,rtl:I,onScroll:Ve,onStartMove:Me,onStopMove:be,spinSize:ht,containerSize:Z.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),V&&i>Z.width&&t.createElement(at,{ref:Xe,prefixCls:f,scrollOffset:w,scrollRange:i,rtl:I,onScroll:Ve,onStartMove:Me,onStopMove:be,spinSize:dt,containerSize:Z.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var At=t.forwardRef(Vt);At.displayName="List";export{At as L};
