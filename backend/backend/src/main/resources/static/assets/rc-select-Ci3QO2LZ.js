import{r as t,a as In}from"./react-CeYxiRmC.js";import"./react-is-DcfIKM1A.js";import{K as y,w as ft,f as dt,z as gn,b as vt,l as mt,e as gt,u as pt,A as Rn,n as ht,x as bt,c as St,B as wt}from"./rc-util-CM-8WHnx.js";import{c as Ue}from"./classnames-BK5ccKcQ.js";import{F as Ct}from"./rc-overflow-BCBCC-mi.js";import"./react-dom-YNBHO1N0.js";import"./rc-resize-observer-TfKnNo0J.js";import"./rc-motion-Db-MgJOo.js";import{d as pn,c as ie,e as J,b as re,g as ze,k as en,o as yt,f as Ie}from"./@babel-D91nw8a6.js";import{T as It}from"./@rc-component-PhcgwFnL.js";import{L as Et}from"./rc-virtual-list-DKpHY2m7.js";var hn=function(e){var a=e.className,o=e.customizeIcon,r=e.customizeIconProps,i=e.children,u=e.onMouseDown,c=e.onClick,v=typeof o=="function"?o(r):o;return t.createElement("span",{className:a,onMouseDown:function(s){s.preventDefault(),u==null||u(s)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:c,"aria-hidden":!0},v!==void 0?v:t.createElement("span",{className:Ue(a.split(/\s+/).map(function(m){return"".concat(m,"-icon")}))},i))},Rt=function(e,a,o,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,c=arguments.length>6?arguments[6]:void 0,v=arguments.length>7?arguments[7]:void 0,m=In.useMemo(function(){if(pn(r)==="object")return r.clearIcon;if(i)return i},[r,i]),s=In.useMemo(function(){return!!(!u&&r&&(o.length||c)&&!(v==="combobox"&&c===""))},[r,u,o.length,c,v]);return{allowClear:s,clearIcon:In.createElement(hn,{className:"".concat(e,"-clear"),onMouseDown:a,customizeIcon:m},"×")}},Bn=t.createContext(null);function xt(){return t.useContext(Bn)}function Dt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),a=ie(e,2),o=a[0],r=a[1],i=t.useRef(null),u=function(){window.clearTimeout(i.current)};t.useEffect(function(){return u},[]);var c=function(m,s){u(),i.current=window.setTimeout(function(){r(m),s&&s()},n)};return[o,c,u]}function Wn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),a=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(a.current)}},[]);function o(r){(r||e.current===null)&&(e.current=r),window.clearTimeout(a.current),a.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},o]}function Ot(n,e,a,o){var r=t.useRef(null);r.current={open:e,triggerOpen:a,customizedTrigger:o},t.useEffect(function(){function i(u){var c;if(!((c=r.current)!==null&&c!==void 0&&c.customizedTrigger)){var v=u.target;v.shadowRoot&&u.composed&&(v=u.composedPath()[0]||v),r.current.open&&n().filter(function(m){return m}).every(function(m){return!m.contains(v)&&m!==v})&&r.current.triggerOpen(!1)}}return window.addEventListener("mousedown",i),function(){return window.removeEventListener("mousedown",i)}},[])}function Mt(n){return![y.ESC,y.SHIFT,y.BACKSPACE,y.TAB,y.WIN_KEY,y.ALT,y.META,y.WIN_KEY_RIGHT,y.CTRL,y.SEMICOLON,y.EQUALS,y.CAPS_LOCK,y.CONTEXT_MENU,y.F1,y.F2,y.F3,y.F4,y.F5,y.F6,y.F7,y.F8,y.F9,y.F10,y.F11,y.F12].includes(n)}var Pt=function(e,a){var o,r=e.prefixCls,i=e.id,u=e.inputElement,c=e.disabled,v=e.tabIndex,m=e.autoFocus,s=e.autoComplete,g=e.editable,P=e.activeDescendantId,l=e.value,x=e.maxLength,S=e.onKeyDown,I=e.onMouseDown,A=e.onChange,ae=e.onPaste,z=e.onCompositionStart,N=e.onCompositionEnd,q=e.open,ee=e.attrs,H=u||t.createElement("input",null),j=H,ne=j.ref,Q=j.props,B=Q.onKeyDown,k=Q.onChange,G=Q.onMouseDown,F=Q.onCompositionStart,Z=Q.onCompositionEnd,Y=Q.style;return ft(!("maxLength"in H.props)),H=t.cloneElement(H,J(J(J({type:"search"},Q),{},{id:i,ref:dt(a,ne),disabled:c,tabIndex:v,autoComplete:s||"off",autoFocus:m,className:Ue("".concat(r,"-selection-search-input"),(o=H)===null||o===void 0||(o=o.props)===null||o===void 0?void 0:o.className),role:"combobox","aria-expanded":q||!1,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":q?P:void 0},ee),{},{value:g?l:"",maxLength:x,readOnly:!g,unselectable:g?null:"on",style:J(J({},Y),{},{opacity:g?null:0}),onKeyDown:function(D){S(D),B&&B(D)},onMouseDown:function(D){I(D),G&&G(D)},onChange:function(D){A(D),k&&k(D)},onCompositionStart:function(D){z(D),F&&F(D)},onCompositionEnd:function(D){N(D),Z&&Z(D)},onPaste:ae})),H},Un=t.forwardRef(Pt);function Hn(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var Nt=typeof window<"u"&&window.document&&window.document.documentElement,Tt=Nt;function Vt(n){return n!=null}function _t(n){return!n&&n!==0}function An(n){return["string","number"].includes(pn(n))}function jn(n){var e=void 0;return n&&(An(n.title)?e=n.title.toString():An(n.label)&&(e=n.label.toString())),e}function Lt(n,e){Tt?t.useLayoutEffect(n,e):t.useEffect(n,e)}function At(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var Fn=function(e){e.preventDefault(),e.stopPropagation()},Ft=function(e){var a=e.id,o=e.prefixCls,r=e.values,i=e.open,u=e.searchValue,c=e.autoClearSearchValue,v=e.inputRef,m=e.placeholder,s=e.disabled,g=e.mode,P=e.showSearch,l=e.autoFocus,x=e.autoComplete,S=e.activeDescendantId,I=e.tabIndex,A=e.removeIcon,ae=e.maxTagCount,z=e.maxTagTextLength,N=e.maxTagPlaceholder,q=N===void 0?function(C){return"+ ".concat(C.length," ...")}:N,ee=e.tagRender,H=e.onToggleOpen,j=e.onRemove,ne=e.onInputChange,Q=e.onInputPaste,B=e.onInputKeyDown,k=e.onInputMouseDown,G=e.onInputCompositionStart,F=e.onInputCompositionEnd,Z=t.useRef(null),Y=t.useState(0),W=ie(Y,2),D=W[0],V=W[1],O=t.useState(!1),ue=ie(O,2),Ee=ue[0],Ae=ue[1],te="".concat(o,"-selection"),fe=i||g==="multiple"&&c===!1||g==="tags"?u:"",He=g==="tags"||g==="multiple"&&c===!1||P&&(i||Ee);Lt(function(){V(Z.current.scrollWidth)},[fe]);var oe=function(M,h,L,$,X){return t.createElement("span",{title:jn(M),className:Ue("".concat(te,"-item"),re({},"".concat(te,"-item-disabled"),L))},t.createElement("span",{className:"".concat(te,"-item-content")},h),$&&t.createElement(hn,{className:"".concat(te,"-item-remove"),onMouseDown:Fn,onClick:X,customizeIcon:A},"×"))},Fe=function(M,h,L,$,X,K){var pe=function(ke){Fn(ke),H(!i)};return t.createElement("span",{onMouseDown:pe},ee({label:h,value:M,disabled:L,closable:$,onClose:X,isMaxTag:!!K}))},Pe=function(M){var h=M.disabled,L=M.label,$=M.value,X=!s&&!h,K=L;if(typeof z=="number"&&(typeof L=="string"||typeof L=="number")){var pe=String(K);pe.length>z&&(K="".concat(pe.slice(0,z),"..."))}var Re=function(Ne){Ne&&Ne.stopPropagation(),j(M)};return typeof ee=="function"?Fe($,K,h,X,Re):oe(M,K,h,X,Re)},ve=function(M){var h=typeof q=="function"?q(M):q;return typeof ee=="function"?Fe(void 0,h,!1,!1,void 0,!0):oe({title:h},h,!1)},E=t.createElement("div",{className:"".concat(te,"-search"),style:{width:D},onFocus:function(){Ae(!0)},onBlur:function(){Ae(!1)}},t.createElement(Un,{ref:v,open:i,prefixCls:o,id:a,inputElement:null,disabled:s,autoFocus:l,autoComplete:x,editable:He,activeDescendantId:S,value:fe,onKeyDown:B,onMouseDown:k,onChange:ne,onPaste:Q,onCompositionStart:G,onCompositionEnd:F,tabIndex:I,attrs:gn(e,!0)}),t.createElement("span",{ref:Z,className:"".concat(te,"-search-mirror"),"aria-hidden":!0},fe," ")),f=t.createElement(Ct,{prefixCls:"".concat(te,"-overflow"),data:r,renderItem:Pe,renderRest:ve,suffix:E,itemKey:At,maxCount:ae});return t.createElement("span",{className:"".concat(te,"-wrap")},f,!r.length&&!fe&&t.createElement("span",{className:"".concat(te,"-placeholder")},m))},kt=function(e){var a=e.inputElement,o=e.prefixCls,r=e.id,i=e.inputRef,u=e.disabled,c=e.autoFocus,v=e.autoComplete,m=e.activeDescendantId,s=e.mode,g=e.open,P=e.values,l=e.placeholder,x=e.tabIndex,S=e.showSearch,I=e.searchValue,A=e.activeValue,ae=e.maxLength,z=e.onInputKeyDown,N=e.onInputMouseDown,q=e.onInputChange,ee=e.onInputPaste,H=e.onInputCompositionStart,j=e.onInputCompositionEnd,ne=e.title,Q=t.useState(!1),B=ie(Q,2),k=B[0],G=B[1],F=s==="combobox",Z=F||S,Y=P[0],W=I||"";F&&A&&!k&&(W=A),t.useEffect(function(){F&&G(!1)},[F,A]);var D=s!=="combobox"&&!g&&!S?!1:!!W,V=ne===void 0?jn(Y):ne,O=t.useMemo(function(){return Y?null:t.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:D?{visibility:"hidden"}:void 0},l)},[Y,D,l,o]);return t.createElement("span",{className:"".concat(o,"-selection-wrap")},t.createElement("span",{className:"".concat(o,"-selection-search")},t.createElement(Un,{ref:i,prefixCls:o,id:r,open:g,inputElement:a,disabled:u,autoFocus:c,autoComplete:v,editable:Z,activeDescendantId:m,value:W,onKeyDown:z,onMouseDown:N,onChange:function(Ee){G(!0),q(Ee)},onPaste:ee,onCompositionStart:H,onCompositionEnd:j,tabIndex:x,attrs:gn(e,!0),maxLength:F?ae:void 0})),!F&&Y?t.createElement("span",{className:"".concat(o,"-selection-item"),title:V,style:D?{visibility:"hidden"}:void 0},Y.label):null,O)},Kt=function(e,a){var o=t.useRef(null),r=t.useRef(!1),i=e.prefixCls,u=e.open,c=e.mode,v=e.showSearch,m=e.tokenWithEnter,s=e.disabled,g=e.prefix,P=e.autoClearSearchValue,l=e.onSearch,x=e.onSearchSubmit,S=e.onToggleOpen,I=e.onInputKeyDown,A=e.domRef;t.useImperativeHandle(a,function(){return{focus:function(V){o.current.focus(V)},blur:function(){o.current.blur()}}});var ae=Wn(0),z=ie(ae,2),N=z[0],q=z[1],ee=function(V){var O=V.which,ue=o.current instanceof HTMLTextAreaElement;!ue&&u&&(O===y.UP||O===y.DOWN)&&V.preventDefault(),I&&I(V),O===y.ENTER&&c==="tags"&&!r.current&&!u&&(x==null||x(V.target.value)),!(ue&&!u&&~[y.UP,y.DOWN,y.LEFT,y.RIGHT].indexOf(O))&&Mt(O)&&S(!0)},H=function(){q(!0)},j=t.useRef(null),ne=function(V){l(V,!0,r.current)!==!1&&S(!0)},Q=function(){r.current=!0},B=function(V){r.current=!1,c!=="combobox"&&ne(V.target.value)},k=function(V){var O=V.target.value;if(m&&j.current&&/[\r\n]/.test(j.current)){var ue=j.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");O=O.replace(ue,j.current)}j.current=null,ne(O)},G=function(V){var O=V.clipboardData,ue=O==null?void 0:O.getData("text");j.current=ue||""},F=function(V){var O=V.target;if(O!==o.current){var ue=document.body.style.msTouchAction!==void 0;ue?setTimeout(function(){o.current.focus()}):o.current.focus()}},Z=function(V){var O=N();V.target!==o.current&&!O&&!(c==="combobox"&&s)&&V.preventDefault(),(c!=="combobox"&&(!v||!O)||!u)&&(u&&P!==!1&&l("",!0,!1),S())},Y={inputRef:o,onInputKeyDown:ee,onInputMouseDown:H,onInputChange:k,onInputPaste:G,onInputCompositionStart:Q,onInputCompositionEnd:B},W=c==="multiple"||c==="tags"?t.createElement(Ft,ze({},e,Y)):t.createElement(kt,ze({},e,Y));return t.createElement("div",{ref:A,className:"".concat(i,"-selector"),onClick:F,onMouseDown:Z},g&&t.createElement("div",{className:"".concat(i,"-prefix")},g),W)},$t=t.forwardRef(Kt),zt=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Bt=function(e){var a=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"}}},Wt=function(e,a){var o=e.prefixCls;e.disabled;var r=e.visible,i=e.children,u=e.popupElement,c=e.animation,v=e.transitionName,m=e.dropdownStyle,s=e.dropdownClassName,g=e.direction,P=g===void 0?"ltr":g,l=e.placement,x=e.builtinPlacements,S=e.dropdownMatchSelectWidth,I=e.dropdownRender,A=e.dropdownAlign,ae=e.getPopupContainer,z=e.empty,N=e.getTriggerDOMNode,q=e.onPopupVisibleChange,ee=e.onPopupMouseEnter,H=en(e,zt),j="".concat(o,"-dropdown"),ne=u;I&&(ne=I(u));var Q=t.useMemo(function(){return x||Bt(S)},[x,S]),B=c?"".concat(j,"-").concat(c):v,k=typeof S=="number",G=t.useMemo(function(){return k?null:S===!1?"minWidth":"width"},[S,k]),F=m;k&&(F=J(J({},F),{},{width:S}));var Z=t.useRef(null);return t.useImperativeHandle(a,function(){return{getPopupElement:function(){var W;return(W=Z.current)===null||W===void 0?void 0:W.popupElement}}}),t.createElement(It,ze({},H,{showAction:q?["click"]:[],hideAction:q?["click"]:[],popupPlacement:l||(P==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:Q,prefixCls:j,popupTransitionName:B,popup:t.createElement("div",{onMouseEnter:ee},ne),ref:Z,stretch:G,popupAlign:A,popupVisible:r,getPopupContainer:ae,popupClassName:Ue(s,re({},"".concat(j,"-empty"),z)),popupStyle:F,getTriggerDOMNode:N,onPopupVisibleChange:q}),i)},Ut=t.forwardRef(Wt);function kn(n,e){var a=n.key,o;return"value"in n&&(o=n.value),a??(o!==void 0?o:"rc-index-key-".concat(e))}function xn(n){return typeof n<"u"&&!Number.isNaN(n)}function Gn(n,e){var a=n||{},o=a.label,r=a.value,i=a.options,u=a.groupLabel,c=o||(e?"children":"label");return{label:c,value:r||"value",options:i||"options",groupLabel:u||c}}function Ht(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.fieldNames,o=e.childrenAsData,r=[],i=Gn(a,!1),u=i.label,c=i.value,v=i.options,m=i.groupLabel;function s(g,P){Array.isArray(g)&&g.forEach(function(l){if(P||!(v in l)){var x=l[c];r.push({key:kn(l,r.length),groupOption:P,data:l,label:l[u],value:x})}else{var S=l[m];S===void 0&&o&&(S=l.label),r.push({key:kn(l,r.length),group:!0,data:l,label:S}),s(l[v],!0)}})}return s(n,!1),r}function Dn(n){var e=J({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return vt(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var jt=function(e,a,o){if(!a||!a.length)return null;var r=!1,i=function c(v,m){var s=yt(m),g=s[0],P=s.slice(1);if(!g)return[v];var l=v.split(g);return r=r||l.length>1,l.reduce(function(x,S){return[].concat(Ie(x),Ie(c(S,P)))},[]).filter(Boolean)},u=i(e,a);return r?typeof o<"u"?u.slice(0,o):u:null},Mn=t.createContext(null);function Gt(n){var e=n.visible,a=n.values;if(!e)return null;var o=50;return t.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(a.slice(0,o).map(function(r){var i=r.label,u=r.value;return["number","string"].includes(pn(i))?i:u}).join(", ")),a.length>o?", ...":null)}var Yt=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Xt=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],On=function(e){return e==="tags"||e==="multiple"},Jt=t.forwardRef(function(n,e){var a,o=n.id,r=n.prefixCls,i=n.className,u=n.showSearch,c=n.tagRender,v=n.direction,m=n.omitDomProps,s=n.displayValues,g=n.onDisplayValuesChange,P=n.emptyOptions,l=n.notFoundContent,x=l===void 0?"Not Found":l,S=n.onClear,I=n.mode,A=n.disabled,ae=n.loading,z=n.getInputElement,N=n.getRawInputElement,q=n.open,ee=n.defaultOpen,H=n.onDropdownVisibleChange,j=n.activeValue,ne=n.onActiveValueChange,Q=n.activeDescendantId,B=n.searchValue,k=n.autoClearSearchValue,G=n.onSearch,F=n.onSearchSplit,Z=n.tokenSeparators,Y=n.allowClear,W=n.prefix,D=n.suffixIcon,V=n.clearIcon,O=n.OptionList,ue=n.animation,Ee=n.transitionName,Ae=n.dropdownStyle,te=n.dropdownClassName,fe=n.dropdownMatchSelectWidth,He=n.dropdownRender,oe=n.dropdownAlign,Fe=n.placement,Pe=n.builtinPlacements,ve=n.getPopupContainer,E=n.showAction,f=E===void 0?[]:E,C=n.onFocus,M=n.onBlur,h=n.onKeyUp,L=n.onKeyDown,$=n.onMouseDown,X=en(n,Yt),K=On(I),pe=(u!==void 0?u:K)||I==="combobox",Re=J({},X);Xt.forEach(function(T){delete Re[T]}),m==null||m.forEach(function(T){delete Re[T]});var ke=t.useState(!1),Ne=ie(ke,2),se=Ne[0],Je=Ne[1];t.useEffect(function(){Je(mt())},[]);var je=t.useRef(null),me=t.useRef(null),he=t.useRef(null),be=t.useRef(null),Ce=t.useRef(null),xe=t.useRef(!1),nn=Dt(),Te=ie(nn,3),Ve=Te[0],De=Te[1],bn=Te[2];t.useImperativeHandle(e,function(){var T,R;return{focus:(T=be.current)===null||T===void 0?void 0:T.focus,blur:(R=be.current)===null||R===void 0?void 0:R.blur,scrollTo:function(we){var ce;return(ce=Ce.current)===null||ce===void 0?void 0:ce.scrollTo(we)},nativeElement:je.current||me.current}});var Oe=t.useMemo(function(){var T;if(I!=="combobox")return B;var R=(T=s[0])===null||T===void 0?void 0:T.value;return typeof R=="string"||typeof R=="number"?String(R):""},[B,I,s]),un=I==="combobox"&&typeof z=="function"&&z()||null,ye=typeof N=="function"&&N(),Sn=gt(me,ye==null||(a=ye.props)===null||a===void 0?void 0:a.ref),ln=t.useState(!1),cn=ie(ln,2),wn=cn[0],sn=cn[1];pt(function(){sn(!0)},[]);var fn=Rn(!1,{defaultValue:ee,value:q}),Ge=ie(fn,2),tn=Ge[0],on=Ge[1],le=wn?tn:!1,dn=!x&&P;(A||dn&&le&&I==="combobox")&&(le=!1);var Qe=dn?!1:le,d=t.useCallback(function(T){var R=T!==void 0?T:!le;A||(on(R),le!==R&&(H==null||H(R)))},[A,le,on,H]),w=t.useMemo(function(){return(Z||[]).some(function(T){return[`
`,`\r
`].includes(T)})},[Z]),p=t.useContext(Mn)||{},b=p.maxCount,_=p.rawValues,U=function(R,Se,we){if(!(K&&xn(b)&&(_==null?void 0:_.size)>=b)){var ce=!0,ge=R;ne==null||ne(null);var $e=jt(R,Z,xn(b)?b-_.size:void 0),Le=we?null:$e;return I!=="combobox"&&Le&&(ge="",F==null||F(Le),d(!1),ce=!1),G&&Oe!==ge&&G(ge,{source:Se?"typing":"effect"}),ce}},Ke=function(R){!R||!R.trim()||G(R,{source:"submit"})};t.useEffect(function(){!le&&!K&&I!=="combobox"&&U("",!1,!1)},[le]),t.useEffect(function(){tn&&A&&on(!1),A&&!xe.current&&De(!1)},[A]);var _e=Wn(),Be=ie(_e,2),de=Be[0],We=Be[1],an=t.useRef(!1),Cn=function(R){var Se=de(),we=R.key,ce=we==="Enter";if(ce&&(I!=="combobox"&&R.preventDefault(),le||d(!0)),We(!!Oe),we==="Backspace"&&!Se&&K&&!Oe&&s.length){for(var ge=Ie(s),$e=null,Le=ge.length-1;Le>=0;Le-=1){var Ye=ge[Le];if(!Ye.disabled){ge.splice(Le,1),$e=Ye;break}}$e&&g(ge,{type:"remove",values:[$e]})}for(var Ze=arguments.length,Xe=new Array(Ze>1?Ze-1:0),vn=1;vn<Ze;vn++)Xe[vn-1]=arguments[vn];if(le&&(!ce||!an.current)){var mn;(mn=Ce.current)===null||mn===void 0||mn.onKeyDown.apply(mn,[R].concat(Xe))}ce&&(an.current=!0),L==null||L.apply(void 0,[R].concat(Xe))},Pn=function(R){for(var Se=arguments.length,we=new Array(Se>1?Se-1:0),ce=1;ce<Se;ce++)we[ce-1]=arguments[ce];if(le){var ge;(ge=Ce.current)===null||ge===void 0||ge.onKeyUp.apply(ge,[R].concat(we))}R.key==="Enter"&&(an.current=!1),h==null||h.apply(void 0,[R].concat(we))},rn=function(R){var Se=s.filter(function(we){return we!==R});g(Se,{type:"remove",values:[R]})},Me=t.useRef(!1),qn=function(){De(!0),A||(C&&!Me.current&&C.apply(void 0,arguments),f.includes("focus")&&d(!0)),Me.current=!0},Zn=function(){xe.current=!0,De(!1,function(){Me.current=!1,xe.current=!1,d(!1)}),!A&&(Oe&&(I==="tags"?G(Oe,{source:"submit"}):I==="multiple"&&G("",{source:"blur"})),M&&M.apply(void 0,arguments))},qe=[];t.useEffect(function(){return function(){qe.forEach(function(T){return clearTimeout(T)}),qe.splice(0,qe.length)}},[]);var et=function(R){var Se,we=R.target,ce=(Se=he.current)===null||Se===void 0?void 0:Se.getPopupElement();if(ce&&ce.contains(we)){var ge=setTimeout(function(){var Ze=qe.indexOf(ge);if(Ze!==-1&&qe.splice(Ze,1),bn(),!se&&!ce.contains(document.activeElement)){var Xe;(Xe=be.current)===null||Xe===void 0||Xe.focus()}});qe.push(ge)}for(var $e=arguments.length,Le=new Array($e>1?$e-1:0),Ye=1;Ye<$e;Ye++)Le[Ye-1]=arguments[Ye];$==null||$.apply(void 0,[R].concat(Le))},nt=t.useState({}),tt=ie(nt,2),ot=tt[1];function at(){ot({})}var Nn;ye&&(Nn=function(R){d(R)}),Ot(function(){var T;return[je.current,(T=he.current)===null||T===void 0?void 0:T.getPopupElement()]},Qe,d,!!ye);var rt=t.useMemo(function(){return J(J({},n),{},{notFoundContent:x,open:le,triggerOpen:Qe,id:o,showSearch:pe,multiple:K,toggleOpen:d})},[n,x,Qe,le,o,pe,K,d]),Tn=!!D||ae,Vn;Tn&&(Vn=t.createElement(hn,{className:Ue("".concat(r,"-arrow"),re({},"".concat(r,"-arrow-loading"),ae)),customizeIcon:D,customizeIconProps:{loading:ae,searchValue:Oe,open:le,focused:Ve,showSearch:pe}}));var it=function(){var R;S==null||S(),(R=be.current)===null||R===void 0||R.focus(),g([],{type:"clear",values:s}),U("",!1,!1)},_n=Rt(r,it,s,Y,V,A,Oe,I),ut=_n.allowClear,lt=_n.clearIcon,ct=t.createElement(O,{ref:Ce}),st=Ue(r,i,re(re(re(re(re(re(re(re(re(re({},"".concat(r,"-focused"),Ve),"".concat(r,"-multiple"),K),"".concat(r,"-single"),!K),"".concat(r,"-allow-clear"),Y),"".concat(r,"-show-arrow"),Tn),"".concat(r,"-disabled"),A),"".concat(r,"-loading"),ae),"".concat(r,"-open"),le),"".concat(r,"-customize-input"),un),"".concat(r,"-show-search"),pe)),Ln=t.createElement(Ut,{ref:he,disabled:A,prefixCls:r,visible:Qe,popupElement:ct,animation:ue,transitionName:Ee,dropdownStyle:Ae,dropdownClassName:te,direction:v,dropdownMatchSelectWidth:fe,dropdownRender:He,dropdownAlign:oe,placement:Fe,builtinPlacements:Pe,getPopupContainer:ve,empty:P,getTriggerDOMNode:function(R){return me.current||R},onPopupVisibleChange:Nn,onPopupMouseEnter:at},ye?t.cloneElement(ye,{ref:Sn}):t.createElement($t,ze({},n,{domRef:me,prefixCls:r,inputElement:un,ref:be,id:o,prefix:W,showSearch:pe,autoClearSearchValue:k,mode:I,activeDescendantId:Q,tagRender:c,values:s,open:le,onToggleOpen:d,activeValue:j,searchValue:Oe,onSearch:U,onSearchSubmit:Ke,onRemove:rn,tokenWithEnter:w}))),yn;return ye?yn=Ln:yn=t.createElement("div",ze({className:st},Re,{ref:je,onMouseDown:et,onKeyDown:Cn,onKeyUp:Pn,onFocus:qn,onBlur:Zn}),t.createElement(Gt,{visible:Ve&&!le,values:s}),Ln,Vn,ut&&lt),t.createElement(Bn.Provider,{value:rt},yn)}),Yn=function(){return null};Yn.isSelectOptGroup=!0;var Xn=function(){return null};Xn.isSelectOption=!0;function Qt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var qt=["disabled","title","children","style","className"];function Kn(n){return typeof n=="string"||typeof n=="number"}var Zt=function(e,a){var o=xt(),r=o.prefixCls,i=o.id,u=o.open,c=o.multiple,v=o.mode,m=o.searchValue,s=o.toggleOpen,g=o.notFoundContent,P=o.onPopupScroll,l=t.useContext(Mn),x=l.maxCount,S=l.flattenOptions,I=l.onActiveValue,A=l.defaultActiveFirstOption,ae=l.onSelect,z=l.menuItemSelectedIcon,N=l.rawValues,q=l.fieldNames,ee=l.virtual,H=l.direction,j=l.listHeight,ne=l.listItemHeight,Q=l.optionRender,B="".concat(r,"-item"),k=ht(function(){return S},[u,S],function(E,f){return f[0]&&E[1]!==f[1]}),G=t.useRef(null),F=t.useMemo(function(){return c&&xn(x)&&(N==null?void 0:N.size)>=x},[c,x,N==null?void 0:N.size]),Z=function(f){f.preventDefault()},Y=function(f){var C;(C=G.current)===null||C===void 0||C.scrollTo(typeof f=="number"?{index:f}:f)},W=function(f){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,M=k.length,h=0;h<M;h+=1){var L=(f+h*C+M)%M,$=k[L]||{},X=$.group,K=$.data;if(!X&&!(K!=null&&K.disabled)&&!F)return L}return-1},D=t.useState(function(){return W(0)}),V=ie(D,2),O=V[0],ue=V[1],Ee=function(f){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;ue(f);var M={source:C?"keyboard":"mouse"},h=k[f];if(!h){I(null,-1,M);return}I(h.value,f,M)};t.useEffect(function(){Ee(A!==!1?W(0):-1)},[k.length,m]);var Ae=t.useCallback(function(E){return v==="combobox"?!1:N.has(E)},[v,Ie(N).toString(),N.size]),te=t.useCallback(function(E){return v==="combobox"?String(E).toLowerCase()===m.toLowerCase():N.has(E)},[v,m,Ie(N).toString(),N.size]);t.useEffect(function(){var E=setTimeout(function(){if(!c&&u&&N.size===1){var C=Array.from(N)[0],M=k.findIndex(function(h){var L=h.data;return L.value===C});M!==-1&&(Ee(M),Y(M))}});if(u){var f;(f=G.current)===null||f===void 0||f.scrollTo(void 0)}return function(){return clearTimeout(E)}},[u,m]);var fe=function(f){f!==void 0&&ae(f,{selected:!N.has(f)}),c||s(!1)};if(t.useImperativeHandle(a,function(){return{onKeyDown:function(f){var C=f.which,M=f.ctrlKey;switch(C){case y.N:case y.P:case y.UP:case y.DOWN:{var h=0;if(C===y.UP?h=-1:C===y.DOWN?h=1:Qt()&&M&&(C===y.N?h=1:C===y.P&&(h=-1)),h!==0){var L=W(O+h,h);Y(L),Ee(L,!0)}break}case y.TAB:case y.ENTER:{var $,X=k[O];X&&!(X!=null&&($=X.data)!==null&&$!==void 0&&$.disabled)&&!F?fe(X.value):fe(void 0),u&&f.preventDefault();break}case y.ESC:s(!1),u&&f.stopPropagation()}},onKeyUp:function(){},scrollTo:function(f){Y(f)}}}),k.length===0)return t.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(B,"-empty"),onMouseDown:Z},g);var He=Object.keys(q).map(function(E){return q[E]}),oe=function(f){return f.label};function Fe(E,f){var C=E.group;return{role:C?"presentation":"option",id:"".concat(i,"_list_").concat(f)}}var Pe=function(f){var C=k[f];if(!C)return null;var M=C.data||{},h=M.value,L=C.group,$=gn(M,!0),X=oe(C);return C?t.createElement("div",ze({"aria-label":typeof X=="string"&&!L?X:null},$,{key:f},Fe(C,f),{"aria-selected":te(h)}),h):null},ve={role:"listbox",id:"".concat(i,"_list")};return t.createElement(t.Fragment,null,ee&&t.createElement("div",ze({},ve,{style:{height:0,width:0,overflow:"hidden"}}),Pe(O-1),Pe(O),Pe(O+1)),t.createElement(Et,{itemKey:"key",ref:G,data:k,height:j,itemHeight:ne,fullHeight:!1,onMouseDown:Z,onScroll:P,virtual:ee,direction:H,innerProps:ee?null:ve},function(E,f){var C=E.group,M=E.groupOption,h=E.data,L=E.label,$=E.value,X=h.key;if(C){var K,pe=(K=h.title)!==null&&K!==void 0?K:Kn(L)?L.toString():void 0;return t.createElement("div",{className:Ue(B,"".concat(B,"-group"),h.className),title:pe},L!==void 0?L:X)}var Re=h.disabled,ke=h.title;h.children;var Ne=h.style,se=h.className,Je=en(h,qt),je=bt(Je,He),me=Ae($),he=Re||!me&&F,be="".concat(B,"-option"),Ce=Ue(B,be,se,re(re(re(re({},"".concat(be,"-grouped"),M),"".concat(be,"-active"),O===f&&!he),"".concat(be,"-disabled"),he),"".concat(be,"-selected"),me)),xe=oe(E),nn=!z||typeof z=="function"||me,Te=typeof xe=="number"?xe:xe||$,Ve=Kn(Te)?Te.toString():void 0;return ke!==void 0&&(Ve=ke),t.createElement("div",ze({},gn(je),ee?{}:Fe(E,f),{"aria-selected":te($),className:Ce,title:Ve,onMouseMove:function(){O===f||he||Ee(f)},onClick:function(){he||fe($)},style:Ne}),t.createElement("div",{className:"".concat(be,"-content")},typeof Q=="function"?Q(E,{index:f}):Te),t.isValidElement(z)||me,nn&&t.createElement(hn,{className:"".concat(B,"-option-state"),customizeIcon:z,customizeIconProps:{value:$,disabled:he,isSelected:me}},me?"✓":null))}))},eo=t.forwardRef(Zt);const no=function(n,e){var a=t.useRef({values:new Map,options:new Map}),o=t.useMemo(function(){var i=a.current,u=i.values,c=i.options,v=n.map(function(g){if(g.label===void 0){var P;return J(J({},g),{},{label:(P=u.get(g.value))===null||P===void 0?void 0:P.label})}return g}),m=new Map,s=new Map;return v.forEach(function(g){m.set(g.value,g),s.set(g.value,e.get(g.value)||c.get(g.value))}),a.current.values=m,a.current.options=s,v},[n,e]),r=t.useCallback(function(i){return e.get(i)||a.current.options.get(i)},[e]);return[o,r]};function En(n,e){return Hn(n).join("").toUpperCase().includes(e)}const to=function(n,e,a,o,r){return t.useMemo(function(){if(!a||o===!1)return n;var i=e.options,u=e.label,c=e.value,v=[],m=typeof o=="function",s=a.toUpperCase(),g=m?o:function(l,x){return r?En(x[r],s):x[i]?En(x[u!=="children"?u:"label"],s):En(x[c],s)},P=m?function(l){return Dn(l)}:function(l){return l};return n.forEach(function(l){if(l[i]){var x=g(a,P(l));if(x)v.push(l);else{var S=l[i].filter(function(I){return g(a,P(I))});S.length&&v.push(J(J({},l),{},re({},i,S)))}return}g(a,P(l))&&v.push(l)}),v},[n,o,r,a,e])};var $n=0,oo=St();function ao(){var n;return oo?(n=$n,$n+=1):n="TEST_OR_SSR",n}function ro(n){var e=t.useState(),a=ie(e,2),o=a[0],r=a[1];return t.useEffect(function(){r("rc_select_".concat(ao()))},[]),n||o}var io=["children","value"],uo=["children"];function lo(n){var e=n,a=e.key,o=e.props,r=o.children,i=o.value,u=en(o,io);return J({key:a,value:i!==void 0?i:a,children:r},u)}function Jn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return wt(n).map(function(a,o){if(!t.isValidElement(a)||!a.type)return null;var r=a,i=r.type.isSelectOptGroup,u=r.key,c=r.props,v=c.children,m=en(c,uo);return e||!i?lo(a):J(J({key:"__RC_SELECT_GRP__".concat(u===null?o:u,"__"),label:u},m),{},{options:Jn(v)})}).filter(function(a){return a})}var co=function(e,a,o,r,i){return t.useMemo(function(){var u=e,c=!e;c&&(u=Jn(a));var v=new Map,m=new Map,s=function(l,x,S){S&&typeof S=="string"&&l.set(x[S],x)},g=function P(l){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=0;S<l.length;S+=1){var I=l[S];!I[o.options]||x?(v.set(I[o.value],I),s(m,I,o.label),s(m,I,r),s(m,I,i)):P(I[o.options],!0)}};return g(u),{options:u,valueOptions:v,labelOptions:m}},[e,a,o,r,i])};function zn(n){var e=t.useRef();e.current=n;var a=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return a}var so=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],fo=["inputValue"];function vo(n){return!n||pn(n)!=="object"}var mo=t.forwardRef(function(n,e){var a=n.id,o=n.mode,r=n.prefixCls,i=r===void 0?"rc-select":r,u=n.backfill,c=n.fieldNames,v=n.inputValue,m=n.searchValue,s=n.onSearch,g=n.autoClearSearchValue,P=g===void 0?!0:g,l=n.onSelect,x=n.onDeselect,S=n.dropdownMatchSelectWidth,I=S===void 0?!0:S,A=n.filterOption,ae=n.filterSort,z=n.optionFilterProp,N=n.optionLabelProp,q=n.options,ee=n.optionRender,H=n.children,j=n.defaultActiveFirstOption,ne=n.menuItemSelectedIcon,Q=n.virtual,B=n.direction,k=n.listHeight,G=k===void 0?200:k,F=n.listItemHeight,Z=F===void 0?20:F,Y=n.labelRender,W=n.value,D=n.defaultValue,V=n.labelInValue,O=n.onChange,ue=n.maxCount,Ee=en(n,so),Ae=ro(a),te=On(o),fe=!!(!q&&H),He=t.useMemo(function(){return A===void 0&&o==="combobox"?!1:A},[A,o]),oe=t.useMemo(function(){return Gn(c,fe)},[JSON.stringify(c),fe]),Fe=Rn("",{value:m!==void 0?m:v,postState:function(w){return w||""}}),Pe=ie(Fe,2),ve=Pe[0],E=Pe[1],f=co(q,H,oe,z,N),C=f.valueOptions,M=f.labelOptions,h=f.options,L=t.useCallback(function(d){var w=Hn(d);return w.map(function(p){var b,_,U,Ke,_e;if(vo(p))b=p;else{var Be;U=p.key,_=p.label,b=(Be=p.value)!==null&&Be!==void 0?Be:U}var de=C.get(b);if(de){var We;_===void 0&&(_=de==null?void 0:de[N||oe.label]),U===void 0&&(U=(We=de==null?void 0:de.key)!==null&&We!==void 0?We:b),Ke=de==null?void 0:de.disabled,_e=de==null?void 0:de.title}return{label:_,value:b,key:U,disabled:Ke,title:_e}})},[oe,N,C]),$=Rn(D,{value:W}),X=ie($,2),K=X[0],pe=X[1],Re=t.useMemo(function(){var d,w=te&&K===null?[]:K,p=L(w);return o==="combobox"&&_t((d=p[0])===null||d===void 0?void 0:d.value)?[]:p},[K,L,o,te]),ke=no(Re,C),Ne=ie(ke,2),se=Ne[0],Je=Ne[1],je=t.useMemo(function(){if(!o&&se.length===1){var d=se[0];if(d.value===null&&(d.label===null||d.label===void 0))return[]}return se.map(function(w){var p;return J(J({},w),{},{label:(p=typeof Y=="function"?Y(w):w.label)!==null&&p!==void 0?p:w.value})})},[o,se,Y]),me=t.useMemo(function(){return new Set(se.map(function(d){return d.value}))},[se]);t.useEffect(function(){if(o==="combobox"){var d,w=(d=se[0])===null||d===void 0?void 0:d.value;E(Vt(w)?String(w):"")}},[se]);var he=zn(function(d,w){var p=w??d;return re(re({},oe.value,d),oe.label,p)}),be=t.useMemo(function(){if(o!=="tags")return h;var d=Ie(h),w=function(b){return C.has(b)};return Ie(se).sort(function(p,b){return p.value<b.value?-1:1}).forEach(function(p){var b=p.value;w(b)||d.push(he(b,p.label))}),d},[he,h,C,se,o]),Ce=to(be,oe,ve,He,z),xe=t.useMemo(function(){return o!=="tags"||!ve||Ce.some(function(d){return d[z||"value"]===ve})||Ce.some(function(d){return d[oe.value]===ve})?Ce:[he(ve)].concat(Ie(Ce))},[he,z,o,Ce,ve,oe]),nn=function d(w){var p=Ie(w).sort(function(b,_){return ae(b,_,{searchValue:ve})});return p.map(function(b){return Array.isArray(b.options)?J(J({},b),{},{options:b.options.length>0?d(b.options):b.options}):b})},Te=t.useMemo(function(){return ae?nn(xe):xe},[xe,ae,ve]),Ve=t.useMemo(function(){return Ht(Te,{fieldNames:oe,childrenAsData:fe})},[Te,oe,fe]),De=function(w){var p=L(w);if(pe(p),O&&(p.length!==se.length||p.some(function(U,Ke){var _e;return((_e=se[Ke])===null||_e===void 0?void 0:_e.value)!==(U==null?void 0:U.value)}))){var b=V?p:p.map(function(U){return U.value}),_=p.map(function(U){return Dn(Je(U.value))});O(te?b:b[0],te?_:_[0])}},bn=t.useState(null),Oe=ie(bn,2),un=Oe[0],ye=Oe[1],Sn=t.useState(0),ln=ie(Sn,2),cn=ln[0],wn=ln[1],sn=j!==void 0?j:o!=="combobox",fn=t.useCallback(function(d,w){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=p.source,_=b===void 0?"keyboard":b;wn(w),u&&o==="combobox"&&d!==null&&_==="keyboard"&&ye(String(d))},[u,o]),Ge=function(w,p,b){var _=function(){var rn,Me=Je(w);return[V?{label:Me==null?void 0:Me[oe.label],value:w,key:(rn=Me==null?void 0:Me.key)!==null&&rn!==void 0?rn:w}:w,Dn(Me)]};if(p&&l){var U=_(),Ke=ie(U,2),_e=Ke[0],Be=Ke[1];l(_e,Be)}else if(!p&&x&&b!=="clear"){var de=_(),We=ie(de,2),an=We[0],Cn=We[1];x(an,Cn)}},tn=zn(function(d,w){var p,b=te?w.selected:!0;b?p=te?[].concat(Ie(se),[d]):[d]:p=se.filter(function(_){return _.value!==d}),De(p),Ge(d,b),o==="combobox"?ye(""):(!On||P)&&(E(""),ye(""))}),on=function(w,p){De(w);var b=p.type,_=p.values;(b==="remove"||b==="clear")&&_.forEach(function(U){Ge(U.value,!1,b)})},le=function(w,p){if(E(w),ye(null),p.source==="submit"){var b=(w||"").trim();if(b){var _=Array.from(new Set([].concat(Ie(me),[b])));De(_),Ge(b,!0),E("")}return}p.source!=="blur"&&(o==="combobox"&&De(w),s==null||s(w))},dn=function(w){var p=w;o!=="tags"&&(p=w.map(function(_){var U=M.get(_);return U==null?void 0:U.value}).filter(function(_){return _!==void 0}));var b=Array.from(new Set([].concat(Ie(me),Ie(p))));De(b),b.forEach(function(_){Ge(_,!0)})},Qe=t.useMemo(function(){var d=Q!==!1&&I!==!1;return J(J({},f),{},{flattenOptions:Ve,onActiveValue:fn,defaultActiveFirstOption:sn,onSelect:tn,menuItemSelectedIcon:ne,rawValues:me,fieldNames:oe,virtual:d,direction:B,listHeight:G,listItemHeight:Z,childrenAsData:fe,maxCount:ue,optionRender:ee})},[ue,f,Ve,fn,sn,tn,ne,me,oe,Q,I,B,G,Z,fe,ee]);return t.createElement(Mn.Provider,{value:Qe},t.createElement(Jt,ze({},Ee,{id:Ae,prefixCls:i,ref:e,omitDomProps:fo,mode:o,displayValues:je,onDisplayValuesChange:on,direction:B,searchValue:ve,onSearch:le,autoClearSearchValue:P,onSearchSplit:dn,dropdownMatchSelectWidth:I,OptionList:eo,emptyOptions:!Ve.length,activeValue:un,activeDescendantId:"".concat(Ae,"_list_").concat(cn)})))}),Qn=mo;Qn.Option=Xn;Qn.OptGroup=Yn;export{Xn as O,Qn as T,Yn as a};
